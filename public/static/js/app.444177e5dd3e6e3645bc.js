webpackJsonp([1],{0:function(t,e){},"2pbd":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"header"}},[e("router-link",{attrs:{to:{name:"Welcome"}}},[this._v("Home")]),this._v(" "),e("router-link",{attrs:{to:"/TsneMap"}},[this._v("TsneMap")]),this._v(" "),e("router-link",{attrs:{to:"/about"}},[this._v("About")])],1)},staticRenderFns:[]};var n={name:"App",components:{NavHeader:i("VU/8")({name:"NavHeader"},o,!1,function(t){i("OCSz")},"data-v-3aee8ca0",null).exports}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("NavHeader"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var c=i("VU/8")(n,a,!1,function(t){i("Tc3e")},null,null).exports,l=i("/ocq"),h={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Hallo Welt")])},staticRenderFns:[]};var r=i("VU/8")({name:"Welcome"},h,!1,function(t){i("2pbd")},"data-v-5548b6b7",null).exports,d=i("d7EF"),u=i.n(d),v=i("W3Iv"),g=i.n(v),f=i("fZjL"),m=i.n(f),p=i("gRE1"),_=i.n(p),w=i("Zrlr"),N=i.n(w),b=i("wxAW"),k=i.n(b),x=i("DmT9"),y=i.n(x),C=function(){function t(e,i){N()(this,t),this.name=e.name,this.links=e.links,this.index=e.index,this.x=e.x,this.y=e.y,this.width=40,this.height=40,this.colorKey=e.colorKey,this.color=e.color,this.label=e.label,this.initX=e.x,this.initY=e.y,this.triggerDraw=i,this.activeScale=3,this.icon=new Image,this.icon.src="data:image/jpeg;base64,"+e.buffer,this._isActive=!1,this.isActiveNeighbour=!1,this.hasImage=!1,this.image=new Image,this.scale=null,this.timerId=0,this._value=null}return k()(t,[{key:"move",value:function(t,e){this._x+=t,this._y+=e}},{key:"draw",value:function(t,e,i){this.scale=i;var s=(this.isActive||this.isActiveNeighbour)&&this.hasImage?this.image:this.icon,o=this.x,n=this.y,a=this.width/i,c=this.height/i;this.isActive?(t.globalAlpha=1,t.drawImage(s,o,n,a,c),t.globalAlpha=.3):this.isActiveNeighbour?(t.globalAlpha=1,t.drawImage(s,o,n,a,c),t.globalAlpha=.3):t.drawImage(s,o,n,a,c),e.fillStyle=this.colorKey,e.fillRect(o,n,a,c)}},{key:"drawBorder",value:function(t,e,i){var s=this.x,o=this.y,n=this.width/i,a=this.height/i;t.strokeStyle=this.color,t.lineWidth=2/i,t.strokeRect(s,o,n,a)}},{key:"width",get:function(){return this.isActive?this._width+this._width*this.activeScale:this.isActiveNeighbour?this._width+this._width*this.activeScale*this.value:this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this.isActive?this._height+this._height*this.activeScale:this.isActiveNeighbour?this._height+this._height*this.activeScale*this.value:this._height},set:function(t){this._height=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t<.1?.1:t>1?1:t}},{key:"isActive",get:function(){return this._isActive},set:function(t){this._isActive=t}},{key:"x",get:function(){return this._x-this.width/2/this.scale},set:function(t){this._x=t}},{key:"y",get:function(){return this._y-this.height/2/this.scale},set:function(t){this._y=t}}]),t}(),S=function(){function t(e,i,s){var o=this;N()(this,t),this.getScale=function(){return o.scale},this.addNode=function(t){o.nodes[t.index]=t,o.colorHash[t.colorKey]=t.index,o.valid=!1},this.draw=function(){if(!o.valid){console.log("reDraw started");var t=o.ctx;o.clear(),o.selection?t.globalAlpha=.3:t.globalAlpha=1,_()(o.nodes).map(function(e){return e.draw(t,o.hitCtx,o.scale)}),_()(o.nodes).map(function(e){return e.drawBorder(t,o.hitCtx,o.scale)}),o.valid=!0}},this.zoom=function(t){console.log("zoom event"),t.preventDefault(),t.stopPropagation();var e=o.findNodeByMousePosition(t.offsetX,t.offsetY);return o.selection&&e&&e.isActiveNeighbour?(console.log("nodeUnderMouse"),console.log(e.name),t.deltaY<0&&(console.log("zoom in - image smaller"),e.value-=.1),t.deltaY>0&&(console.log("zoom out - image bigger"),e.value+=.1),o.valid=!1):(t.deltaY<0&&(console.log("zoom in"),o.scale+=1),t.deltaY>0&&(console.log("zoom out"),o.scale=o.scale-1),o.valid=!1),!1},this.handleMouseDown=function(t){t.preventDefault(),t.stopPropagation(),console.log(o.hitCanvas.width),console.log(o.hitCtx.width),console.log(o.canvas.width),console.log(o.ctx.width);var e=t.shiftKey,i=o.findNodeByMousePosition(t.offsetX,t.offsetY);console.log("mousedown"),o.startX=t.offsetX,o.startY=t.offsetY,i?(o.draggNode=i,o.activeModus&&e&&(i.isActiveNeighbour?(i.isActiveNeighbour=!1,delete o.selection.links[i.index],o.valid=!1):o.selection!==i&&(o.selection.links[i.index]=.5,i.isActiveNeighbour=!0,i.value=.5,o.valid=!1))):o.dragging=!0},this.handleMouseMove=function(t){var e=t.offsetX,i=t.offsetY,s=o.findNodeByMousePosition(e,i);if(s&&!s.hasImage&&o.socket.emit("requestImage",{name:s.name,index:s.index}),o.draggNode||o.dragging){var n=e-o.startX,a=i-o.startY;if(o.startX=e,o.startY=i,o.dragging)o.translateX+=n,o.translateY+=a;else if(o.draggNode){var c=n/o.scale,l=a/o.scale;o.draggNode.move(c,l),o.activeModus&&o.draggNode.isActive&&m()(o.draggNode.links).forEach(function(t){var e=o.nodes[t];e&&e.move(c*e.value,l*e.value)})}o.triggerDraw()}else o.activeModus||(!s&&o.selection?o.removeSelection():!o.selection&&s?o.selectNode(s):s&&s!==o.selection&&(o.removeSelection(),o.selectNode(s)))},this.handleMouseUp=function(){console.log("mouseup"),o.dragging=!1,o.draggNode=!1},this.handleDoubleClick=function(){console.log("Double click"),o.selection&&!o.activeModus?(o.activeModus=!0,o.activeNode=o.selection):o.activeModus&&(o.activeModus=!1,o.activeNode=!1),o.triggerDraw()},this.socket=s,this.canvas=e,this.hitCanvas=i,this.width=e.width,this.height=e.height,this.ctx=e.getContext("2d"),this.hitCtx=i.getContext("2d"),this.valid=!1,this.nodes={},this.colorHash={},this.dragging=!1,this.draggNode=!1,this.selection=null,this.activeModus=!1,this.activeNode=!1,this._scale=30,this.interval=100,this.offsetLeft=e.getBoundingClientRect().left,this.offsetTop=e.getBoundingClientRect().top,this.translateX=this.width/2,this.translateY=this.height/2,this.startX=null,this.startY=null,this.canvas.onmousedown=this.handleMouseDown,this.canvas.onmousemove=this.handleMouseMove,this.canvas.onmouseup=this.handleMouseUp,this.canvas.ondblclick=this.handleDoubleClick,this.canvas.onwheel=this.zoom,setInterval(function(){return o.draw()},this.interval)}return k()(t,[{key:"triggerDraw",value:function(){console.log("triggerDraw"),this.valid=!1}},{key:"getNodes",value:function(){return this.removeSelection(),this.nodes}},{key:"resetStore",value:function(){this.nodes={},this.colorHash={},this.valid=!1}},{key:"clear",value:function(){this.ctx.resetTransform(),this.hitCtx.resetTransform(),this.ctx.clearRect(0,0,this.width,this.height),this.hitCtx.clearRect(0,0,this.width,this.height),this.ctx.translate(this.translateX,this.translateY),this.hitCtx.translate(this.translateX,this.translateY),this.ctx.scale(this.scale,this.scale),this.hitCtx.scale(this.scale,this.scale)}},{key:"findNodeByMousePosition",value:function(t,e){var i=this.hitCtx.getImageData(t,e,1,1).data,s="rgb("+i[0]+","+i[1]+","+i[2]+")",o=this.colorHash[s];return o?this.nodes[o]:null}},{key:"selectNode",value:function(t){var e=this;this.updateSelectionUI(this.scale),this.selection&&this.selection!==t&&this.removeSelection(),this.selection=t,console.log("selected Node"),console.log(t),this.updateSelectionUI(t),this.selection.isActive=!0,g()(t.links).forEach(function(t){var i=u()(t,2),s=i[0],o=i[1],n=e.nodes[s];n&&(n.isActiveNeighbour=!0,n.value=o)}),this.triggerDraw()}},{key:"removeSelection",value:function(){var t=this,e=this.selection;this.updateSelectionUI(!1),e&&(e.isActive=!1,m()(e.links).forEach(function(i){var s=t.nodes[i];s&&(s.isActiveNeighbour=!1,e.links[i]=s.value)})),this.selection=null,this.valid=!1}},{key:"scale",set:function(t){this._scale=t<1?1:t,this.valid=!1},get:function(){return this._scale}}]),t}(),A={store:null,name:"TsneMap",data:function(){return{exampleContent:"This is TEXT",items:[],socket:null,scale1:0,labels:{},width:0,height:0,activeNode:{}}},methods:{sendData:function(){console.log("send data clicked");var t=this.store.getNodes();this.store.resetStore(),this.socket.emit("updateNodes",t)},scaleDown:function(){this.store.scale-=1},scaleUp:function(){this.store.scale+=1},updateScale:function(t){console.log("UpdateScale triggerd"),console.log(t),this.scale1=t},updateSelection:function(t){this.activeNode=t||{}}},watch:{exampleContent:function(t,e){this.updateCanvas()}},computed:{scale2:function(){var t=this;return function(){return t.scale()}},selectedNode:function(){return this.store&&this.store.selection&&this.store.selection.name},selectedNodeX:function(){return this.store&&this.store.selection&&this.store.selection.x},selectedNodeY:function(){return this.store&&this.store.selection&&this.store.selection.y},selectedNodeNeighboursCount:function(){return this.activeNode.links&&m()(this.activeNode.links).length},imageScale:function(){return this.store&&this.store.selection&&this.store.selection.imageScale}},mounted:function(){var t=this,e=y()("http://localhost:3000"),i=document.getElementById("canvas"),s=.8*i.parentNode.clientWidth;this.width=s,this.height=700;var o=document.createElement("canvas");i.width=s,i.height=700,o.width=s,o.height=700;var n=new S(i,o,e);this.store=n,n.updateSelectionUI=this.updateSelection,this.scale=n.getScale,console.log("Save store"),console.log(this.store),this.socket=e,e.on("connect",function(t){t?(console.log("conected"),console.log(t)):(console.log("no conection"),console.log(t)),e.emit("updateNodes",{})}),e.on("node",function(t){console.log("receive node"),console.log(t),t&&n.addNode(new C(t,n.triggerDraw))}),e.on("receiveImage",function(t){console.log("receive image data"),console.log(t);var e=n.nodes[t.index];console.log(e),e.image.src="data:image/jpeg;base64,"+t.buffer,e.hasImage=!0,n.valid=!1}),e.on("updateLabels",function(e){console.log("updateLabels"),console.log(e),t.labels=e})},beforeDestroy:function(){this.socket&&this.socket.disconnect()}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"body"},[i("div",{staticClass:"sub-header"},[i("div",[i("div",{staticClass:"row"},[i("div",[t._v("S: "+t._s(t.scale1))]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.scaleUp}},[t._v("+")]),t._v(" "),i("div",{staticClass:"btn",on:{click:t.scaleDown}},[t._v("-")])])]),t._v(" "),i("div",{staticClass:"row"},t._l(t.labels,function(e,s){return i("div",{key:s,staticClass:"btn",style:{color:e}},[t._v("\n                "+t._s(s)+"\n            ")])})),t._v(" "),i("div",{staticClass:"btn",on:{click:t.sendData}},[t._v("Update Data")])]),t._v(" "),i("div",{staticClass:"row"},[i("canvas",{ref:"canvas",attrs:{id:"canvas"}}),t._v(" "),i("div",{staticClass:"details"},[i("div",{staticClass:"info-box"},[i("div",[t._v("Name: "+t._s(t.activeNode.name))]),t._v(" "),i("div",[t._v("Label: "+t._s(t.activeNode.label))]),t._v(" "),i("div",[t._v("Links #: "+t._s(t.selectedNodeNeighboursCount))]),t._v(" "),i("div",[t._v("x: "+t._s(t.selectedNodeX))]),t._v(" "),i("div",[t._v("y: "+t._s(t.selectedNodeY))]),t._v(" "),i("div",[t._v("ImgScale: "+t._s(t.imageScale))])])])])])},staticRenderFns:[]};var D=i("VU/8")(A,M,!1,function(t){i("joHz")},"data-v-67671f1b",null).exports,I={name:"Coins",data:function(){return{coin:{}}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;fetch("https://api.coinmarketcap.com/v1/ticker/"+this.$route.params.id+"/").then(function(e){t.coin=e.data[0],console.log(e)}).catch(function(t){console.log(t)})}}},U={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("p",[t._v("Name: "+t._s(t.coin.name))]),t._v(" "),i("p",[t._v("Symbol: "+t._s(t.coin.symbol))]),t._v(" "),i("p",[t._v("Price (USD): "+t._s(t.coin.price_usd))])])},staticRenderFns:[]};var Y=i("VU/8")(I,U,!1,function(t){i("PUMs")},"data-v-7c7c2eff",null).exports;s.a.use(l.a);var X=new l.a({routes:[{path:"/",name:"Welcome",component:r},{path:"/TsneMap",name:"TsneMap",component:D},{path:"/coins/:id",name:"Coins",component:Y}]});i("cilB");s.a.config.productionTip=!1,new s.a({el:"#app",router:X,components:{App:c},template:"<App/>"})},OCSz:function(t,e){},PUMs:function(t,e){},Tc3e:function(t,e){},cilB:function(t,e){},joHz:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.444177e5dd3e6e3645bc.js.map