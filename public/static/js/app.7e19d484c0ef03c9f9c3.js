webpackJsonp([1],{0:function(t,e){},"2pbd":function(t,e){},"8OJO":function(t,e){},"9+CR":function(t,e){},"B+Ni":function(t,e){t.exports=function(t,e,s,i,o,n,c){for(var l=[0,t.length-1,0],a=[],r=void 0,h=void 0;l.length;){var d=l.pop(),u=l.pop(),v=l.pop();if(u-v<=c)for(var g=v;g<=u;g++)r=e[2*g],h=e[2*g+1],r>=s&&r<=o&&h>=i&&h<=n&&a.push(t[g]);else{var f=Math.floor((v+u)/2);r=e[2*f],h=e[2*f+1],r>=s&&r<=o&&h>=i&&h<=n&&a.push(t[f]);var m=(d+1)%2;(0===d?s<=r:i<=h)&&(l.push(v),l.push(f-1),l.push(m)),(0===d?o>=r:n>=h)&&(l.push(f+1),l.push(u),l.push(m))}}return a}},Cf9v:function(t,e){},L6FE:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"header"}},[s("router-link",{attrs:{to:"/svm"}},[t._v("SVM")]),t._v(" "),s("router-link",{attrs:{to:"/classifier"}},[t._v("Classifier")]),t._v(" "),s("router-link",{attrs:{to:"/triplets"}},[t._v("Triplets")]),t._v(" "),s("router-link",{attrs:{to:"/neighbours"}},[t._v("Neighbours")]),t._v(" "),s("router-link",{attrs:{to:"/tsne"}},[t._v("t-SNE")])],1)},staticRenderFns:[]};var n=s("VU/8")({name:"NavHeader"},o,!1,function(t){s("9+CR")},"data-v-d4955c6a",null).exports,c=s("fZjL"),l=s.n(c),a=s("DmT9"),r=s.n(a),h=s("Zrlr"),d=s.n(h),u=s("wxAW"),v=s.n(u),g=function(){function t(e,s,i){var o=this;d()(this,t),this.name=e.name,this.links=e.links,this.index=e.index,this._x=e.x,this._y=e.y,this._width=1,this._height=1,this.colorKey=e.colorKey,this.color=e.color,this.ctx=s,this.hitCtx=i,this.cluster=e.cluster,this.positives=e.positives,this.negatives=e.negatives,this.label=e.label,this.labels=e.labels,this.initX=e.x,this.initY=e.y,this.activeScale=3,this.scale=1,this.icon=new Image,this.icon.src=e.buffer,this._isActive=!1,this.isActiveNeighbour=!1,this.hasImage=!1;var n=new Image;n.onload=function(){o.hasImage=!0,o.image=n,console.log("load image"),console.log(o.image.src)},n.src="/api"+e.url,this.scale=null,this.imgScale=null,this._value=null}return v()(t,[{key:"move",value:function(t,e){this._x+=t,this._y+=e}},{key:"draw",value:function(t,e,s,i){var o=this.hasImage?this.image:this.icon,n=o.width*s/100/e,c=o.height*s/100/e,l=this._x-n/2,a=this._y-c/2;this.ctx.drawImage(o,l,a,n,c),this.hitCtx.fillStyle=this.colorKey,this.hitCtx.fillRect(l,a,n,c)}},{key:"drawClusterd",value:function(t,e,s,i){var o=1/t,n=this._x,c=this._y;this.ctx.fillStyle="grey",this.ctx.fillRect(n,c,o,o)}},{key:"drawAsActive",value:function(t,e){this.scale=1;var s=this.icon,i=s.width*e/1e3,o=s.height*e/1e3,n=this._x-i/2,c=this._y-o/2;this.ctx.drawImage(s,n,c,i,o),this.hitCtx.fillStyle=this.colorKey,this.hitCtx.fillRect(n,c,i,o)}},{key:"drawAsNeighbour",value:function(t,e,s){this.scale=1;var i=this.icon,o=i.width*e*s/1e3,n=i.height*e*s/1e3,c=this._x-o/2,l=this._y-n/2;this.ctx.drawImage(i,c,l,o,n),this.hitCtx.fillStyle=this.colorKey,this.hitCtx.fillRect(c,l,o,n)}},{key:"drawBorder",value:function(t,e,s,i,o,n){var c=this.icon.width*(this.isActive?s:this.isActiveNeighbour?s*this.value:e)/1e3,l=this.icon.height*(this.isActive?s:this.isActiveNeighbour?s*this.value:e)/1e3,a=this._x-c/2,r=this._y-l/2,h=o/10/t;this.ctx.strokeStyle=n||this.color,this.ctx.lineWidth=h,this.cluster<i||this.isActive||this.isActiveNeighbour?h&&this.ctx.strokeRect(a,r,c,l):(h&&this.ctx.strokeRect(a,r,c/t,l/t),this.hitCtx.fillStyle=this.colorKey,this.hitCtx.fillRect(a,r,c/t,l/t))}},{key:"width",get:function(){var t=this._width;return this.isActive?t+t*this.activeScale:this.isActiveNeighbour?t+t*this.activeScale*this.value:t},set:function(t){this._width=t}},{key:"height",get:function(){var t=this._height;return this.isActive?t+t*this.activeScale:this.isActiveNeighbour?t+t*this.activeScale*this.value:t},set:function(t){this._height=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t<.1?.1:t>1?1:t}},{key:"isActive",get:function(){return this._isActive},set:function(t){this._isActive=t}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}}]),t}(),f=s("d7EF"),m=s.n(f),_=s("W3Iv"),p=s.n(_),w=s("gRE1"),b=s.n(w),k=s("B+Ni"),C=s.n(k),x=function(){function t(e,s,i,o){var n=this;d()(this,t),this.socket=i,this.ui=o,this.canvas=e,this.ctx=e.getContext("2d"),this.width=e.width,this.height=e.height,this.hitCanvas=s,this.hitCtx=s.getContext("2d"),this.kdtree={},this.valid=!1,this._valid=!1,this.nodes={},this.colorHash={},this.dragging=!1,this.draggNode=!1,this.selection=null,this.nodeOnMouseDown=!1,this.showKLabels=!1,this.selectedLabel=null,this.labelColor=null,this.activeMode=!1,this.nodeUnderMouse=!1,this.scissors=!1,this.drawScissors=!1,this.scissorsStartX=0,this.scissorsStartY=0,this.scissorsEndX=0,this.scissorsEndY=0,this._cluster=500,this._scale=20,this._scale2=20,this._imgScale=12,this._activeImgScale=10,this._borderWidth=5,this._scrollGrowth=1.3,this._scrollImgGrowth=1.1,this._clusterGrowth=1.2,this.translateX=this.width/2,this.translateY=this.height/2,this.startX=null,this.startY=null,this.canvas.onmousedown=function(t){return n.handleMouseDown(t)},this.canvas.onmousemove=function(t){return n.handleMouseMove(t)},this.canvas.onmouseup=function(t){return n.handleMouseUp(t)},this.canvas.ondblclick=function(t){return n.handleDoubleClick(t)},this.canvas.onwheel=function(t){return n.zoom(t)}}return v()(t,[{key:"triggerDraw",value:function(){this.valid=!1}},{key:"addNode",value:function(t){this.nodes[t.index]=t,this.colorHash[t.colorKey]=t.index,this.triggerDraw()}},{key:"getNodes",value:function(){return this.nodes}},{key:"getNode",value:function(t){return this.nodes[t]}},{key:"range",value:function(t,e,s,i){var o=C()(this.kdtree.ids,this.kdtree.coords,t,e,s,i,this.kdtree.nodeSize);console.log("range"),console.log(o)}},{key:"resetStore",value:function(){this.nodes={},this.colorHash={},this.triggerDraw()}},{key:"clear",value:function(){this.ctx.resetTransform(),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.translate(this.translateX,this.translateY),this.ctx.scale(this.scale,this.scale),this.hitCtx.resetTransform(),this.hitCtx.clearRect(0,0,this.width,this.height),this.hitCtx.translate(this.translateX,this.translateY),this.hitCtx.scale(this.scale,this.scale)}},{key:"draw",value:function(){var t=this;if(!this.valid){if(console.time("draw"),this.clear(),this.selection){console.log("SELECTION WHILE DRAW");var e=l()(this.selection.links);console.log(this.selection),console.log(e),this.ctx.globalAlpha=.2,b()(this.nodes).forEach(function(e){e===t.selection?(console.log("ACKTIVE NODE"),console.log(e),t.ctx.globalAlpha=1,e.drawAsActive(t.scale,t.activeImgScale),t.ctx.globalAlpha=.2):t.selection.links[e.index]?(console.log("LINKED NODE"),t.ctx.globalAlpha=1,e.drawAsNeighbour(t.scale,t.activeImgScale,t.selection.links[e.index]),t.ctx.globalAlpha=.2):t.cluster<e.cluster?e.drawClusterd(t.scale,t.scale2,t.imgScale,t.cluster):e.draw(t.scale,t.scale2,t.imgScale,t.cluster)}),this.ctx.globalAlpha=1}else b()(this.nodes).forEach(function(e){t.cluster<e.cluster?e.drawClusterd(t.scale,t.scale2,t.imgScale,t.cluster):e.draw(t.scale,t.scale2,t.imgScale,t.cluster)});if(this.showKLabels?b()(this.nodes).forEach(function(e){e.drawBorder(t.scale,t.imgScale,t.activeImgScale,t.cluster,t.borderWidth)}):this.selectedLabel&&b()(this.nodes).forEach(function(e){-1!==e.labels.indexOf(t.selectedLabel)&&e.drawBorder(t.scale,t.imgScale,t.activeImgScale,t.cluster,t.borderWidth,t.labelColor)}),this.drawScissors){var s=(this.scissorsStartX-this.translateX)/this.scale,i=(this.scissorsStartY-this.translateY)/this.scale,o=(this.scissorsEndX-this.scissorsStartX)/this.scale,n=(this.scissorsEndY-this.scissorsStartY)/this.scale;this.ctx.strokeStyle="#3882ff",this.ctx.lineWidth=2/this.scale,this.ctx.strokeRect(s,i,o,n),this.ctx.globalAlpha=.2,this.ctx.fillRect(s,i,o,n),this.ctx.globalAlpha=1}this.valid=!0,console.timeEnd("draw")}}},{key:"zoom",value:function(t){console.log("zoom event"),t.preventDefault(),t.stopPropagation();var e=this.nodeUnderMouse;if(this.selection&&this.selection.links[e.index]){var s=e.index,i=this.selection.links;t.deltaY<0&&(console.log("zoom in - image smaller"),i[s]-=.1),t.deltaY>0&&(console.log("zoom out - image bigger"),i[s]+=.1),i[s]<.1&&(i[s]=.1),i[s]>1&&(i[s]=1),this.triggerDraw()}else{var o=t.offsetX,n=t.offsetY,c=(o-this.translateX)/this.scale,l=(n-this.translateY)/this.scale,a=this.scale;t.deltaY<0&&(console.log("zoom in"),this.scale*=this.scrollGrowth,this.scale2*=this.scrollImgGrowth,this.cluster*=this.clusterGrowth),t.deltaY>0&&(console.log("zoom out"),this.scale/=this.scrollGrowth,this.scale2/=this.scrollImgGrowth,this.cluster/=this.clusterGrowth);var r=this.scale-a;this.translateX-=c*r,this.translateY-=l*r,this.triggerDraw()}return!1}},{key:"findNodeByMousePosition",value:function(t,e){var s=this.hitCtx.getImageData(t,e,1,1).data,i="rgb("+s[0]+","+s[1]+","+s[2]+")",o=this.colorHash[i];return o>=0&&this.nodes[o]}},{key:"handleMouseDown",value:function(t){t.preventDefault(),t.stopPropagation(),console.log("mousedown");var e=this.nodeUnderMouse;this.nodeOnMouseDown=e,this.startX=t.offsetX,this.startY=t.offsetY,e?this.draggNode=e:this.scissors?(console.log("Scissors"),this.drawScissors=!0,this.scissorsStartX=this.startX,this.scissorsStartY=this.startY,this.triggerDraw()):this.dragging=!0}},{key:"handleMouseMove",value:function(t){var e=this,s=t.offsetX,i=t.offsetY;this.scissors&&(this.scissorsEndX=s,this.scissorsEndY=i,this.triggerDraw());var o=this.findNodeByMousePosition(s,i);if(this.nodeUnderMouse=o,this.ui.activeNode=o,o&&!o.hasImage&&this.socket.emit("requestImage",{name:o.name,index:o.index}),this.draggNode||this.dragging){var n=s-this.startX,c=i-this.startY;if(this.startX=s,this.startY=i,this.dragging)this.translateX+=n,this.translateY+=c;else if(this.draggNode){var l=n/this.scale,a=c/this.scale;this.draggNode.move(l,a),this.selection&&this.selection===this.draggNode&&p()(this.selection.links).forEach(function(t){var s=m()(t,2),i=s[0],o=s[1],n=e.nodes[i];n&&n.move(l*o,a*o)})}this.triggerDraw()}}},{key:"handleMouseUp",value:function(t){var e=this;console.log("mouseup");var s=this.nodeUnderMouse,i=t.ctrlKey;if(s===this.nodeOnMouseDown)switch(console.log("click on node"),this.ui.clickedNode=s,this.ui.$route.name){case"svm":break;case"neighbours":if(this.selection&&this.selection!==this.nodeUnderMouse&&i){console.log("Add or remove link");var o=l()(this.selection.links),n=this.nodeUnderMouse.index;console.log({i:n,links:o}),this.selection.links[n]?(console.log("remove link"),delete this.selection.links[n]):(console.log("Add link"),this.selection.links[n]=.5),console.log(this.selection)}break;default:console.log("no mode selected - what to do with a node click now?")}if(this.dragging=!1,this.draggNode=!1,this.scissors){this.ui.cuttedNodes=[];var c=(this.scissorsStartX-this.translateX)/this.scale,a=(this.scissorsStartY-this.translateY)/this.scale,r=(this.scissorsEndX-this.translateX)/this.scale,h=(this.scissorsEndY-this.translateY)/this.scale;b()(this.nodes).forEach(function(t){(t.x>c&&t.x<r||t.x<c&&t.x>r)&&(t.y<a&&t.y>h||t.y>a&&t.y<h)&&e.ui.cuttedNodes.push(t)}),this.scissors=!1,this.ui.scissors=!1,this.drawScissors=!1}this.triggerDraw()}},{key:"handleDoubleClick",value:function(){console.log("Double click"),this.nodeUnderMouse&&this.nodeUnderMouse!==this.selection?this.selection=this.nodeUnderMouse:this.selection=null,this.triggerDraw()}},{key:"scale",set:function(t){this._scale=t<1?1:t,this.triggerDraw(),this.ui.scale=this.scale},get:function(){return this._scale}},{key:"scale2",set:function(t){t<1?this._scale=1:this._scale2=t,this.triggerDraw(),this.ui.scale2=this.scale2},get:function(){return this._scale2}},{key:"imgScale",set:function(t){this._imgScale=t<1?1:t,this.triggerDraw()},get:function(){return this._imgScale}},{key:"activeImgScale",set:function(t){this._activeImgScale=t<1?1:t,this.triggerDraw()},get:function(){return this._activeImgScale}},{key:"borderWidth",set:function(t){this._borderWidth=t<0?0:t,this.triggerDraw()},get:function(){return this._borderWidth}},{key:"cluster",set:function(t){this._cluster=t<1?1:t,this.triggerDraw(),this.ui.cluster=this.cluster},get:function(){return this._cluster}},{key:"scrollGrowth",set:function(t){this._scrollGrowth=t<=1?1.01:t},get:function(){return this._scrollGrowth}},{key:"scrollImgGrowth",set:function(t){this._scrollImgGrowth=t<=1?1.01:t},get:function(){return this._scrollImgGrowth}},{key:"clusterGrowth",get:function(){return this._clusterGrowth},set:function(t){this._clusterGrowth=t<=1?1.01:t,this.ui.clusterGrowth=this.clusterGrowth}},{key:"valid",set:function(t){var e=this;t||window.requestAnimationFrame(function(){return e.draw()}),this._valid=t},get:function(){return this._valid}}]),t}(),N={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{attrs:{type:"range",min:"0",max:"800",step:"10"},domProps:{value:this.value}})},staticRenderFns:[]};var S=s("VU/8")({name:"range-slider",props:["value","change","input","slide"]},N,!1,function(t){s("zUi4")},"data-v-0f9d6ee5",null).exports,y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"triblet-area"},[t.node.negatives?s("div",{staticClass:"negatives area",class:{redActive:t.redActive},on:{click:t.toogleRed}},[t.node.negatives?t._l(t.node.negatives,function(e,i){return s("div",{key:i,staticClass:"image"},[s("img",{attrs:{src:e.icon.src,alt:""},on:{click:function(e){t.removeNegativ(i)}}})])}):t._e()],2):t._e(),t._v(" "),t.node.icon?s("div",{staticClass:"node"},[t.node.icon?[s("img",{attrs:{src:t.node.icon.src,alt:""}})]:t._e()],2):t._e(),t._v(" "),t.node.positives?s("div",{staticClass:"positives area",class:{greenActive:t.greenActive},on:{click:t.toogleBlue}},[t.node.positives?t._l(t.node.positives,function(e,i){return s("div",{key:i,staticClass:"image"},[s("img",{attrs:{src:e.icon.src,alt:""},on:{click:function(e){t.removePositiv(i)}}})])}):t._e()],2):t._e()])},staticRenderFns:[]};var A=s("VU/8")({name:"triplets",props:["node","positives","negatives"],data:function(){return{redActive:!1,greenActive:!1}},methods:{toogleRed:function(){!this.redActive&&this.greenActive&&(this.greenActive=!1),this.redActive=!this.redActive},toogleBlue:function(){!this.greenActive&&this.redActive&&(this.redActive=!1),this.greenActive=!this.greenActive},removePositiv:function(t){this.node.positives.splice(t,1)},removeNegativ:function(t){this.node.negatives.splice(t,1)}}},y,!1,function(t){s("8OJO")},"data-v-2f9b069c",null).exports,I={name:"classifier",props:["nodes","node","labels"],data:function(){return{label:"",showLabels:!1,selectedNodes:[],mouseOver:!1}},watch:{node:function(t){this.addNode(t)},nodes:function(t){var e=this;t&&t.forEach(function(t){return e.addNode(t)})}},methods:{addNode:function(t){t&&-1===this.selectedNodes.indexOf(t)&&this.selectedNodes.push(t)},removeNode:function(t){this.selectedNodes.splice(t,1)},addLabel:function(t){var e=this;t.target;console.log("addLabel clicked"),console.log(this.label),-1===this.labels.indexOf(this.label)&&this.labels.push(this.label),this.selectedNodes.forEach(function(t){-1===t.labels.indexOf(e.label)&&t.labels.push(e.label)}),this.label="",this.showLabels=!1},handleFocus:function(t){console.log("input focus"),this.showLabels=!0},handleBlur:function(t){console.log("input blur"),this.mouseOver||(this.showLabels=!1)},chooseLabel:function(t){console.log("chooselabel"),this.label=t,this.showLabels=!1}},computed:{labelsFiltered:function(){var t=this;return this.labels.filter(function(e){return e.includes(t.label)})}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"classifier"},[s("div",{staticClass:"imgArea"},t._l(t.selectedNodes,function(e,i){return s("div",{key:i,staticClass:"image"},[s("img",{attrs:{src:e.icon.src,alt:""},on:{click:function(e){t.removeNode(i)}}})])})),t._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"label"}],attrs:{type:"text"},domProps:{value:t.label},on:{focus:t.handleFocus,blur:t.handleBlur,input:function(e){e.target.composing||(t.label=e.target.value)}}}),t._v(" "),t.showLabels?s("div",{staticClass:"dropdown",on:{mouseenter:function(e){t.mouseOver=!0},mouseleave:function(e){t.mouseOver=!1}}},t._l(t.labelsFiltered,function(e){return s("div",{key:e,staticClass:"item",on:{click:function(s){t.chooseLabel(e)}}},[t._v(t._s(e))])})):t._e(),t._v(" "),s("div",{staticClass:"btn",on:{click:t.addLabel}},[t._v("add")])])])},staticRenderFns:[]};var G=s("VU/8")(I,L,!1,function(t){s("L6FE")},"data-v-72e4347e",null).exports,W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"scissors",class:{active:this.active},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},on:{click:this.clickHandler}},[e("circle",{attrs:{cx:"6",cy:"6",r:"3"}}),this._v(" "),e("circle",{attrs:{cx:"6",cy:"18",r:"3"}}),this._v(" "),e("line",{attrs:{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}}),this._v(" "),e("line",{attrs:{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}}),this._v(" "),e("line",{attrs:{x1:"8.12",y1:"8.12",x2:"12",y2:"12"}})])},staticRenderFns:[]};var E={store:null,name:"TsneMap",components:{Scissors:s("VU/8")({name:"Scissors",props:["clickHandler","active"]},W,!1,function(t){s("jyKv")},"data-v-7a755806",null).exports,RangeSlider:S,Triplets:A,Classifier:G},data:function(){return{items:[],positives:[],negatives:[],socket:null,connectedToSocket:!1,loadingNodes:!1,nodesCount:0,scale:0,scale2:0,labels:[],selectedLabel:null,showLabels:!1,clickedNode:null,labelColor:"#6057ff",showKLabels:!1,scissors:!1,width:0,height:0,activeNode:{},cluster:5,imgWidth:0,activeImgWidth:0,borderWidth:0,range:0,cuttedNodes:[],showOptions:!1,scrollGrowth:0,scrollImgGrowth:0,clusterGrowth:0}},methods:{getNode:function(t){return this.store.getNode(t)},sendData:function(){console.log("send data clicked");var t=this.store.getNodes();this.store.resetStore(),this.socket.emit("updateNodes",t),this.loadingNodes=!0,this.nodesCount=0},changeActiveNode:function(t){return this.activeNode=t,null},changeCluster:function(t){this.store.cluster+=t,this.cluster=this.store.cluster},changeImgWidth:function(t){this.store.imgScale+=t,this.imgWidth=this.store.imgScale},activeImgWidthMore:function(){this.store.activeImgScale+=1,this.activeImgWidth=this.store.activeImgScale},activeImgWidthLess:function(){this.store.activeImgScale-=1,this.activeImgWidth=this.store.activeImgScale},borderWidthMore:function(){this.store.borderWidth+=1,this.borderWidth=this.store.borderWidth},borderWidthLess:function(){this.store.borderWidth-=1,this.borderWidth=this.store.borderWidth},toggleShowOptions:function(){this.showOptions=!this.showOptions},changeScrollGrowth:function(t){this.store.scrollGrowth=Math.round(100*(this.store.scrollGrowth+t))/100,this.scrollGrowth=this.store.scrollGrowth},changeScrollImgGrowth:function(t){this.store.scrollImgGrowth=Math.round(100*(this.store.scrollImgGrowth+t))/100,this.scrollImgGrowth=this.store.scrollImgGrowth},changeClusterGrowth:function(t){this.store.clusterGrowth=Math.round(100*(this.store.clusterGrowth+t))/100},toggleShowKLabels:function(){this.showKLabels=!this.showKLabels,this.store.showKLabels=this.showKLabels,this.store.valid=!1,console.log(this.showKLabels)},toogleLabel:function(t){this.selectedLabel===t?this.selectedLabel=null:this.selectedLabel=t,this.store.selectedLabel=this.selectedLabel,this.store.triggerDraw()},selectScissors:function(){console.log("selectScissors"),this.scissors=!this.scissors,this.store.scissors=this.scissors}},watch:{cluster:function(t){this.store.cluster=t}},computed:{selectedNode:function(){return this.store&&this.store.selection&&this.store.selection.name},selectedNodeNeighboursCount:function(){return this.activeNode.links&&l()(this.activeNode.links).length},imageScale:function(){return this.store&&this.store.selection&&this.store.selection.imageScale}},mounted:function(){var t=this,e=r.a.connect("http://localhost:3000",{transports:["websocket"],reconnectionDelay:100,reconnectionDelayMax:1e3}),s=document.getElementById("canvas"),i=.8*s.parentNode.clientWidth;this.width=i,this.height=700;var o=document.createElement("canvas");s.width=i,s.height=700,o.width=i,o.height=700;var n=new x(s,o,e,this);this.store=n,n.labelColor=this.labelColor,this.cluster=n.cluster,this.imgWidth=n.imgScale,this.activeImgWidth=n.activeImgScale,this.borderWidth=n.borderWidth,this.scrollGrowth=n.scrollGrowth,this.scrollImgGrowth=n.scrollImgGrowth,console.log("Save store"),console.log(this.store),this.socket=e,e.on("connect",function(){t.connectedToSocket=!0,console.log("conected"),console.log("Socket id: "+e.id),console.log(e);var s=t.store.getNodes();console.log("nodes in store while connect (its maybe just a reconnect)"),console.log(s),l()(s).length||t.loadingNodes||(e.emit("updateNodes",{}),t.loadingNodes=!0)}),e.on("disconnect",function(s){t.connectedToSocket=!1,console.log("disconnect: "+s),console.log(e)}),e.on("node",function(t,e){t.index%100==0&&(console.log("receive node "+t.index),console.log(t)),n.addNode(new g(t,n.ctx,n.hitCtx)),n.triggerDraw(),e(t.index)}),e.on("receiveImage",function(t){n.nodes[t.index]}),e.on("allNodesUpdated",function(){t.loadingNodes=!1}),e.on("nodesCount",function(e){console.log("nodesCount: "+e),t.nodesCount=e}),e.on("updateLabels",function(e){console.log("updateLabels"),console.log(e),t.labels=e}),e.on("updateKdtree",function(t){console.log("updateKdtree"),console.log(t),n.kdtree=t}),e.on("connect_error",function(){console.log("connect_error")}),e.on("connect_timeout",function(){console.log("connect_timeout")}),e.on("reconnect",function(){console.log("reconnect")}),e.on("connecting",function(){console.log("connecting")}),e.on("reconnecting",function(){console.log("reconnecting")}),e.on("connect_failed",function(){console.log("connect_failed")}),e.on("reconnect_failed",function(){console.log("reconnect_failed")}),e.on("close",function(){console.log("close")})},beforeDestroy:function(){this.socket&&this.socket.disconnect(),clearInterval(this.store.timerId)}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"body"},[s("div",{staticClass:"sub-header"},[s("div"),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"dropdownArea"}),t._v(" "),s("div",{staticClass:"labelsArea",on:{mouseenter:function(e){t.showLabels=!0},mouseleave:function(e){t.showLabels=!1}}},[s("div",{staticClass:"btn"},[t._v("labels")]),t._v(" "),t.showLabels?s("div",{staticClass:"labels"},[t._l(t.labels,function(e,i){return s("div",{key:i,staticClass:"btn",class:{active:t.selectedLabel===e},style:{color:e},on:{click:function(s){t.toogleLabel(e)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])}),t._v(" "),s("div",{staticClass:"btn",class:{active:t.showKLabels},on:{click:t.toggleShowKLabels}},[t._v("\n                        K-Label\n                    ")])],2):t._e()]),t._v(" "),s("div",{staticClass:"btn",class:{active:t.showOptions},on:{click:t.toggleShowOptions}},[t._v("Options")]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.sendData}},[t._v("Update Data")]),t._v(" "),s("div",{staticClass:"tool-box row"},[t.loadingNodes?s("div",{staticClass:"loader"}):t._e(),t._v(" "),s("scissors",{attrs:{active:t.scissors,clickHandler:t.selectScissors}},[t._v("a")])],1)])]),t._v(" "),s("div",{staticClass:"row"},[s("canvas",{ref:"canvas",attrs:{id:"canvas",tabindex:"0"}}),t._v(" "),s("div",{staticClass:"details"},[t.showOptions?s("div",{staticClass:"options info-box"},[s("div",{staticClass:"row-btn"},[s("div",[t._v("Cluster: "+t._s(Math.round(t.cluster)))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(-100)}}},[t._v("-100")]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(-1e3)}}},[t._v("-1000")]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(100)}}},[t._v("+100")]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.changeCluster(1e3)}}},[t._v("+1000")])])]),t._v(" "),s("div",{staticClass:"row-btn"},[s("div",[t._v("ImageWidth: "+t._s(t.imgWidth))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeImgWidth(-2)}}},[t._v("-2")]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.changeImgWidth(2)}}},[t._v("+2")])])]),t._v(" "),s("div",{staticClass:"row-btn"},[s("div",[t._v("ImageWidth(active): "+t._s(t.activeImgWidth))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:t.activeImgWidthLess}},[t._v("-1")]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.activeImgWidthMore}},[t._v("+1")])])]),t._v(" "),s("div",{staticClass:"row-btn"},[s("div",[t._v("BorderWidth: "+t._s(t.borderWidth))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:t.borderWidthLess}},[t._v("-1")]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.borderWidthMore}},[t._v("+1")])])]),t._v(" "),s("div",{staticClass:"row-btn"},[s("div",[t._v("ScrollGrowth: "+t._s(t.scrollGrowth))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeScrollGrowth(-.01)}}},[t._v("-0.1")]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.changeScrollGrowth(.01)}}},[t._v("+0.1")])])]),t._v(" "),s("div",{staticClass:"row-btn"},[s("div",[t._v("ScrollImgGrowth: "+t._s(t.scrollImgGrowth))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeScrollImgGrowth(-.01)}}},[t._v("-0.1")]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.changeScrollImgGrowth(.01)}}},[t._v("+0.1")])])]),t._v(" "),s("div",{staticClass:"row-btn"},[s("div",[t._v("ClusterGrowth: "+t._s(t.clusterGrowth))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterGrowth(-.01)}}},[t._v("-0.1")]),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.changeClusterGrowth(.01)}}},[t._v("+0.1")])])])]):t._e(),t._v(" "),s("router-view",{attrs:{nodes:t.cuttedNodes,labels:t.labels,node:t.clickedNode,getNode:t.getNode,changeActiveNode:t.changeActiveNode}}),t._v(" "),s("div",{staticClass:"info-box"},[t.activeNode.hasImage?s("img",{staticClass:"img",attrs:{src:t.activeNode.image.src}}):t._e(),t._v(" "),s("div",[t._v("Name: "+t._s(t.activeNode.name))]),t._v(" "),s("div",[t._v("Label: "+t._s(t.activeNode.label))]),t._v(" "),s("div",[t._v("Labels: "+t._s(t.activeNode.labels))]),t._v(" "),s("div",[t._v("Links #: "+t._s(t.selectedNodeNeighboursCount))])])],1)]),t._v(" "),s("triplets",{attrs:{node:t.activeNode}})],1)},staticRenderFns:[]};var M={name:"App",components:{NavHeader:n,TsneMap:s("VU/8")(E,D,!1,function(t){s("vF1S")},"data-v-a48a8816",null).exports}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("nav-header"),this._v(" "),e("tsne-map")],1)},staticRenderFns:[]};var Y=s("VU/8")(M,O,!1,function(t){s("NeEX")},null,null).exports,X=s("/ocq"),R={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("Hallo Welt")])},staticRenderFns:[]};var K=s("VU/8")({name:"Welcome"},R,!1,function(t){s("2pbd")},"data-v-5548b6b7",null).exports,U=s("Xxa5"),P=s.n(U),F=s("mvHQ"),B=s.n(F),T=s("exGp"),H=s.n(T),V={name:"Svm",props:["node","nodes","getNode","changeActiveNode"],data:function(){return{positives:[],positivesAll:[],negatives:[],negativesAll:[],selectPositives:!0,loading:!1,count:0}},watch:{node:function(t){this.addNode(t)},nodes:function(t){var e=this;t&&t.forEach(function(t){return e.addNode(t)})}},methods:{addNode:function(t){t&&-1===this.positives.indexOf(t)&&-1===this.negatives.indexOf(t)&&(this.selectPositives?this.positives.push(t):this.negatives.push(t))},toggleActive:function(t){this.selectPositives=t},switchPositivs:function(t){this.negatives.push(this.positives[t]),this.positives.splice(t,1)},switchNegatives:function(t){this.positives.push(this.negatives[t]),this.negatives.splice(t,1)},removePositives:function(t){this.positives.splice(t,1)},removeNegatives:function(t){this.negatives.splice(t,1)},trainSvm:function(){var t=this;return H()(P.a.mark(function e(){var s,i;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("trainSvm clicked"),t.loading=!0,t.positives.forEach(function(e){return-1===t.positivesAll.indexOf(e)&&t.positivesAll.push(e)}),t.negatives.forEach(function(e){return-1===t.negativesAll.indexOf(e)&&t.negativesAll.push(e)}),s=B()({p:t.positivesAll,n:t.negativesAll,count:t.count}),e.next=7,fetch("/api/v1/trainSvm",{method:"POST",headers:{"Content-type":"application/json"},body:s}).then(function(t){return t.json()}).catch(function(t){return console.error(t)});case 7:i=e.sent,t.count+=1,t.positives=[],i.p.forEach(function(e){return t.positives.push(t.getNode(e))}),t.negatives=[],i.n.forEach(function(e){return t.negatives.push(t.getNode(e))}),t.loading=!1;case 14:case"end":return e.stop()}},e,t)}))()},stopSvm:function(){var t=this;return H()(P.a.mark(function e(){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("stopSvm clicked"),t.loading=!0,t.positives.forEach(function(e){return-1===t.positivesAll.indexOf(e)&&t.positivesAll.push(e)}),t.negatives.forEach(function(e){return-1===t.negativesAll.indexOf(e)&&t.negativesAll.push(e)}),e.next=6,fetch("/api/v1/stopSvm",{method:"POST",headers:{"Content-type":"application/json"}}).then(function(t){return t.text()}).catch(function(t){return console.error(t)});case 6:t.loading=!1;case 7:case"end":return e.stop()}},e,t)}))()},clearSvm:function(){this.count=0,this.positives=[],this.positivesAll=[],this.negatives=[],this.negativesAll=[]},handleMouseOver:function(t){this.changeActiveNode(t)}}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"area"},[t.loading?s("div",{staticClass:"loading"},[s("div",{staticClass:"loading-wheel"})]):t._e(),t._v(" "),s("div",{staticClass:"imgArea",class:{activePositiv:t.selectPositives},on:{click:function(e){t.toggleActive(!0)}}},t._l(t.positives,function(e,i){return s("div",{key:i,staticClass:"image",on:{mouseover:function(s){t.handleMouseOver(e)}}},[s("img",{attrs:{src:e.icon.src,alt:""},on:{click:function(e){t.switchPositivs(i)},contextmenu:function(e){e.preventDefault(),t.removePositives(i)}}})])})),t._v(" "),s("div",{staticClass:"imgArea",class:{activeNegativ:!t.selectPositives},on:{click:function(e){t.toggleActive(!1)}}},t._l(t.negatives,function(e,i){return s("div",{key:i,staticClass:"image",on:{mouseover:function(s){t.handleMouseOver(e)}}},[s("img",{attrs:{src:e.icon.src,alt:""},on:{click:function(e){t.switchNegatives(i)},contextmenu:function(e){e.preventDefault(),t.removeNegatives(i)}}})])})),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"btn",on:{click:t.trainSvm}},[t._v("train")]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.stopSvm}},[t._v("stop")]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.clearSvm}},[t._v("clear")])]),t._v(" "),s("div",{staticClass:"btn",on:{click:t.clearSvm}},[t._v(t._s(t.count))])])},staticRenderFns:[]};var $=s("VU/8")(V,z,!1,function(t){s("Cf9v")},"data-v-467a0641",null).exports;i.a.use(X.a);var j=new X.a({routes:[{path:"/",name:"Welcome",component:K},{path:"/classifier",name:"classifier",component:G,props:!0},{path:"/svm",name:"svm",component:$,props:!0},{path:"/neighbours",name:"neighbours"}]});s("cilB");i.a.config.productionTip=!1,new i.a({el:"#app",router:j,components:{App:Y},template:"<App/>"})},NeEX:function(t,e){},cilB:function(t,e){},jyKv:function(t,e){},vF1S:function(t,e){},zUi4:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7e19d484c0ef03c9f9c3.js.map